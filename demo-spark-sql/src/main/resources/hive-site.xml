<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
    <property>
        <name>hive.metastore.uris</name>
        <value>thrift://hktest-admin5:9083</value>
    </property>
    <property>
        <name>javax.jdo.option.ConnectionURL</name>
        <value>jdbc:mysql://hktest-admin5:3306/hive3_metastore?createDatabaseIfNotExist=true</value>
        <description>JDBC connect string for a JDBC metastore</description>
    </property>
    <property>
        <name>metastore.metastore.event.db.notification.api.auth</name>
        <value>false</value>
    </property>
    <property>
        <name>javax.jdo.option.ConnectionDriverName</name>
        <value>com.mysql.jdbc.Driver</value>
        <description>Driver class name for a JDBC metastore</description>
    </property>
    <property>
        <name>javax.jdo.option.ConnectionUserName</name>
        <value>hive</value>
        <description>username to use against metastore database</description>
    </property>
    <property>
        <name>javax.jdo.option.ConnectionPassword</name>
        <value>hktest</value>
        <description>password to use against metastore database</description>
    </property>
    <property>
        <name>datanucleus.schema.autoCreateAll</name>
        <value>false</value>
        <description>creates necessary schema on a startup if one doesn't exist. set this to false, after creating it
            once
        </description>
    </property>
    <property>
        <name>hive.metastore.execute.setugi</name>
        <value>true</value>
        <description>In unsecure mode, setting this property to true will cause the metastore to execute DFS operations
            using the client's reported user and group permissions. Note that this property must be set on both the
            client and server sides. Further note that its best effort. If client sets its to true and server sets it to
            false, client setting will be ignored.
        </description>
    </property>
    <property>
        <name>hive.security.authorization.enabled</name>
        <value>false</value>
    </property>
    <!--VALUE:null (no access)-->
    <property>
        <name>hive.security.authorization.createtable.owner.grants</name>
        <value>ALL</value>
    </property>
    <!--VALUE:true-->
    <property>
        <name>hive.warehouse.subdir.inherit.perms</name>
        <value>false</value>
    </property>
    <!--VALUE:10000-->
    <property>
        <name>hive.server2.thrift.port</name>
        <value>10000</value>
    </property>
    <property>
        <name>hive.server2.thrift.http.port</name>
        <value>10001</value>
    </property>
    <!--VALUE:6h-->
    <property>
        <name>hive.server2.session.check.interval</name>
        <value>30m</value>
    </property>
    <!--VALUE:7d-->
    <property>
        <name>hive.server2.idle.session.timeout</name>
        <value>3h</value>
    </property>
    <!--VALUE:5d-->
    <property>
        <name>hive.server2.idle.operation.timeout</name>
        <value>3h</value>
    </property>
    <property>
        <name>hive.server2.enable.impersonation</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.metastore.sasl.enabled</name>
        <value>false</value>
    </property>
    <property>
        <name>hive.metastore.warehouse.dir</name>
        <value>hdfs://hktest/user/hive/warehouse</value>
    </property>
    <!--VALUE:600s-->
    <property>
        <name>hive.metastore.client.socket.timeout</name>
        <value>600s</value>
    </property>
    <!--map join-->
    <property>
        <name>hive.auto.convert.join</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.auto.convert.join.noconditionaltask</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.auto.convert.sortmerge.join.to.mapjoin</name>
        <value>false</value>
    </property>
    <property>
        <name>hive.convert.join.bucket.mapjoin.tez</name>
        <value>false</value>
    </property>
    <property>
        <name>hive.enforce.sortmergebucketmapjoin</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.mapjoin.bucket.cache.size</name>
        <value>10000</value>
    </property>
    <property>
        <name>hive.mapjoin.optimized.hashtable</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.optimize.bucketmapjoin</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.optimize.bucketmapjoin.sortedmerge</name>
        <value>false</value>
    </property>
    <!--map聚合-->
    <property>
        <name>hive.map.aggr</name>
        <value>true</value>
    </property>
    <!--引擎-->
    <property>
        <name>hive.execution.engine</name>
        <value>mr</value>
    </property>
    <property>
        <name>hive.tez.java.opts</name>
        <value>-server -Djava.net.preferIPv4Stack=true -XX:NewRatio=8 -XX:+UseNUMA -XX:+UseG1GC -XX:+ResizeTLAB
            -XX:+PrintGCDetails -verbose:gc -XX:+PrintGCTimeStamps
        </value>
    </property>
    <!--矢量查询-->
    <property>
        <name>vectorized.execution.enabled</name>
        <value>false</value>
    </property>
    <property>
        <name>vectorized.execution.reduce.enabled</name>
        <value>false</value>
    </property>
    <property>
        <name>hive.vectorized.execution.enabled</name>
        <value>false</value>
    </property>
    <property>
        <name>hive.vectorized.execution.reduce.enabled</name>
        <value>false</value>
    </property>
    <!--优化器-->
    <property>
        <name>hive.cbo.enable</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.compute.query.using.stats</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.stats.fetch.column.stats</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.stats.fetch.partition.stats</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.fetch.task.conversion</name>
        <value>minimal</value>
    </property>
    <property>
        <name>hive.fetch.task.conversion.threshold</name>
        <value>10485760</value>
    </property>
    <!--打印统计信息-->
    <property>
        <name>hive.tez.exec.print.summary</name>
        <value>true</value>
    </property>
    <!--reduce个数动态调整-->
    <property>
        <name>hive.tez.auto.reducer.parallelism</name>
        <value>true</value>
    </property>
    <!--map处理数据量上限256M-->
    <property>
        <name>tez.grouping.max-size</name>
        <value>262144000</value>
    </property>
    <!-- 显示表名 -->
    <property>
        <name>hive.cli.print.header</name>
        <value>true</value>
    </property>
    <!-- 显示库名 -->
    <property>
        <name>hive.cli.print.current.db</name>
        <value>true</value>
    </property>
    <!-- 并行执行-->
    <property>
        <name>hive.exec.parallel</name>
        <value>true</value>
    </property>
    <!-- 同一个sql允许并行任务的最大线程数 -->
    <property>
        <name>hive.exec.parallel.thread.number</name>
        <value>16</value>
    </property>
    <!--索引优化-->
    <property>
        <name>hive.optimize.index.filter</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.optimize.index.groupby</name>
        <value>true</value>
    </property>
    <!--动态分区-->
    <property>
        <name>hive.exec.dynamic.partition</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.exec.dynamic.partition.mode</name>
        <value>nonstrict</value>
    </property>
    <property>
        <name>hive.exec.max.dynamic.partitions</name>
        <value>3650</value>
    </property>
    <property>
        <name>hive.exec.max.dynamic.partitions.pernode</name>
        <value>2000</value>
    </property>
    <!--内存参数-->
    <property>
        <name>tez.am.resource.memory.mb</name>
        <value>12288</value>
    </property>
    <property>
        <name>tez.am.launch.cmd-opts</name>
        <value>-Xmx10240m</value>
    </property>
    <!--最大工作线程数量-->
    <property>
        <name>hive.server2.thrift.max.worker.threads</name>
        <value>1000</value>
    </property>
    <!--小文件merge-->
    <property>
        <name>hive.merge.mapfiles</name>
        <value>true</value>
    </property>
    <property>
        <name>hive.merge.mapredfiles</name>
        <value>true</value>
    </property>
    <!-- kerberos -->
    <property>
        <name>hive.server2.authentication</name>
        <value>NONE</value>
    </property>
    <!--集群zk地址参数-->
    <property>
        <name>hadoop.zk.address</name>
        <value>hktest-admin1:2181,hktest-admin2:2181,hktest-admin3:2181</value>
    </property>
    <property>
        <name>tez.counters.max</name>
        <value>2000</value>
    </property>
</configuration>
